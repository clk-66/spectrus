# =============================================================================
# Spectrus — environment variable reference
# Copy this file to .env and fill in the values marked REQUIRED.
# All other variables have sensible defaults for a single-node deployment.
# =============================================================================

# -----------------------------------------------------------------------------
# Go server (spectrus-server)
# -----------------------------------------------------------------------------

# TCP port the HTTP/WebSocket server listens on.
# Default: 3000
SPECTRUS_PORT=3000

# Path to the SQLite database file inside the container.
# The ./data directory is bind-mounted to /data, so this should stay as-is.
# Default: /data/spectrus.db
SPECTRUS_DB_PATH=/data/spectrus.db

# Initial admin account — used ONLY on first startup when no users exist yet.
# After the first user is created these variables are ignored; remove or blank
# them once the server is running to reduce the attack surface.
# If left unset and no users exist, the server logs a warning on startup.
SPECTRUS_ADMIN_EMAIL=admin
SPECTRUS_ADMIN_PASSWORD=change-me-strong-password

# REQUIRED — secret used to sign and verify JWT access + refresh tokens.
# Generate a strong value with: openssl rand -hex 32
# Changing this invalidates all existing sessions.
SPECTRUS_JWT_SECRET=change-me-generate-with-openssl-rand-hex-32

# Public domain or IP used to build invite links shown to users.
# Example: spectrus.example.com  or  203.0.113.10
# Default: localhost
SPECTRUS_DOMAIN=localhost

# Internal URL the Go server uses to reach the mediasoup sidecar.
# With network_mode: host, the media service binds directly to the host, so
# localhost:3001 is always correct on a single-node deployment.
# Default: http://localhost:3001
SPECTRUS_MEDIA_URL=http://localhost:3001

# Keygen.sh license key — leave blank to run in community (non-premium) mode.
SPECTRUS_LICENSE_KEY=

# Keygen.sh account ID — required only if SPECTRUS_LICENSE_KEY is set.
SPECTRUS_KEYGEN_ACCOUNT_ID=

# -----------------------------------------------------------------------------
# mediasoup SFU (spectrus-media)
# -----------------------------------------------------------------------------

# IP address mediasoup binds WebRTC transports to inside the container.
# 0.0.0.0 (all interfaces) is correct for Docker deployments.
# Default: 127.0.0.1
MEDIASOUP_LISTEN_IP=0.0.0.0

# REQUIRED — public IP address of this server.
# mediasoup advertises this IP in WebRTC ICE candidates so that remote clients
# can reach the UDP media ports. Must be a routable public address.
# Example: 203.0.113.10
MEDIASOUP_ANNOUNCED_IP=

# Internal HTTP port for the mediasoup API (used by the Go server).
# Default: 3001
MEDIA_PORT=3001

# UDP port range allocated to WebRTC transports.
# Open these ports in your firewall / security group (UDP ingress).
# Default: 10000–10999
RTC_MIN_PORT=10000
RTC_MAX_PORT=10999

# -----------------------------------------------------------------------------
# Litestream backup (optional — enable with: docker compose --profile backup up)
# -----------------------------------------------------------------------------

# S3-compatible storage credentials for continuous SQLite replication.
# Supports AWS S3, Cloudflare R2, Backblaze B2, MinIO, etc.
LITESTREAM_ACCESS_KEY_ID=
LITESTREAM_SECRET_ACCESS_KEY=

# Replica destination URL.
# Examples:
#   s3://my-bucket/spectrus          (AWS S3)
#   s3://my-bucket/spectrus?endpoint=https://account.r2.cloudflarestorage.com  (R2)
# See https://litestream.io/reference/config/ for full syntax.
LITESTREAM_REPLICA_URL=
